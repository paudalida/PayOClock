<main>
  <div class="main-container">
    <div class="attendance-history">
      <div class="header">
        <h1>Daily Time Record - {{ employee.name }}</h1>
        <button type="button" class="close-button" (click)="closePopup()">
          <i class='bx bx-x'></i>
        </button>
      </div>

      <div class="container-body">

        <div class="dialog-actions">
          <button class="button" (click)="downloadPDF()">Download PDF</button>

          <div class="date-range-dropdown">
            <select [(ngModel)]="selectedDateRange" (change)="dateFilter($event)">
                <option *ngFor="let date of attendanceWeeks; let last = last;" [selected]="last">{{ date }}</option>
            </select>
          </div>
        </div>
        
        <table mat-table [dataSource]="dtrRecords" class="mat-elevation-z8">
          
          <ng-container matColumnDef="fullDate">
            <th mat-header-cell *matHeaderCellDef> Date </th>
            <td mat-cell *matCellDef="let element"> {{ formatFullDate(element.date, element.day) }} </td>
          </ng-container>
      
          <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef> Status </th>
            <td mat-cell *matCellDef="let element"> {{ element.status }} </td>
          </ng-container>
      
          <ng-container matColumnDef="timeIn">
            <th mat-header-cell *matHeaderCellDef> Time In </th>
            <td mat-cell *matCellDef="let element"> {{ element.time_in || 'N/A' }} </td>
          </ng-container>
      
          <ng-container matColumnDef="timeOut">
            <th mat-header-cell *matHeaderCellDef> Time Out </th>
            <td mat-cell *matCellDef="let element"> {{ element.time_out || 'N/A' }} </td>
          </ng-container>
      
          <tr mat-header-row *matHeaderRowDef="['fullDate', 'status', 'timeIn', 'timeOut']"></tr>
          <tr mat-row *matRowDef="let row; columns: ['fullDate', 'status', 'timeIn', 'timeOut'];"></tr>
        
        </table>
      </div>
    </div>
  </div>
</main>
